<!DOCTYPE html>
<html lang="en">

<head>
  <style>
    @import url(css/global.css);
  </style>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>2166.design-bitset</title>
</head>

<body>
  <div id='leetcode-box'>
    <h2>2166.design-bitset</h2>
  </div>
  <div id='result'></div>
  <script>
    /**
     * @param {number} size
     */
    var Bitset = function (size) {
      this.bitSet = new Array(size).fill(0)
      this.size = size
      this.cnt = 0
      this.f = 0
    }

    /** 
     * @param {number} idx
     * @return {void}
     */
    Bitset.prototype.fix = function (idx) {
      if ((this.bitSet[idx] + this.f) % 2 === 0) {
        ++this.cnt
        ++this.bitSet[idx]
      }
    }

    /** 
     * @param {number} idx
     * @return {void}
     */
    Bitset.prototype.unfix = function (idx) {
      // this.bitSet[idx] = 0
      if ((this.bitSet[idx] + this.f) % 2 === 1) {
        --this.cnt
        ++this.bitSet[idx]
      }
    }

    /**
     * @return {void}
     */
    Bitset.prototype.flip = function () {
      this.cnt = this.size - this.cnt
      ++this.f
    }

    /**
     * @return {boolean}
     */
    Bitset.prototype.all = function () {
      return this.cnt === this.size
    }

    /**
     * @return {boolean}
     */
    Bitset.prototype.one = function () {
      return this.cnt > 0
    }

    /**
     * @return {number}
     */
    Bitset.prototype.count = function () {
      return this.cnt
    }

    /**
     * @return {string}
     */
    Bitset.prototype.toString = function () {
      const arr = []
      for (let i=0; i< this.size;++i) {
        arr.push((this.bitSet[i] + this.f) % 2)
      }
      return arr.join('')
    }

    /**
     * Your Bitset object will be instantiated and called as such:
     * var obj = new Bitset(size)
     * obj.fix(idx)
     * obj.unfix(idx)
     * obj.flip()
     * var param_4 = obj.all()
     * var param_5 = obj.one()
     * var param_6 = obj.count()
     * var param_7 = obj.toString()
     */
    let result = 'no data available'

    document.querySelector('#result').innerHTML = 'result is: ' + JSON.stringify(result)
  </script>
</body>

</html>